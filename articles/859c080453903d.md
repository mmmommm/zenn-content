---
title: "k8s.io/apimachinery/pkg/util/sets ã®ä½¿ã„é“"
emoji: "ğŸ‘‹"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Go", "Kubernetes"]
published: false
---

sets ãŒä¾¿åˆ©ãªã®ã§ä½¿ã„ã¾ã—ã‚‡ã†ï¼

https://pkg.go.dev/k8s.io/apimachinery/pkg/util/sets

Set ã¯ slice ã®ã‚ˆã†ãªæ¦‚å¿µã§ã™ãŒã€å†…éƒ¨çš„ã«ã¯ map ãªã®ã§è¦ç´ ã®é‡è¤‡ã¯è¨±ã•ã‚Œã¦ãŠã‚‰ãšã€ãã®ãŸã‚è¦ç´ ã®è¿½åŠ ã‚„å‰Šé™¤ã€å­˜åœ¨ç¢ºèªãªã©ã‚’çŸ­ã„æ™‚é–“ã§è¡Œãˆã¾ã™ã€‚
é›†åˆã®å·®é›†åˆ(Difference)ã€äº¤å·®(Intersection)ã€å¯¾ç§°å·®(Symmetric Difference)ãªã©æ•°å­¦çš„ãªé›†åˆæ¼”ç®—ãŒçµ„ã¿è¾¼ã¿ã§æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚
ã¾ãŸ List ã‚„ UnsortedList ãŒã‚ã‚‹ãŸã‚æœ€çµ‚çš„ãªçµæœã‚’ slice ã«ã—ã¦è¿”å´ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚

```go
type Empty struct{}
type Set[T comparable] map[T]Empty
```

# New

```go
func New[T comparable](items ...T) Set[T]
```

èª¬æ˜ä¸è¦ã§ã™ã­ã€æ–°ãŸãª Set ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚
æ³¨æ„ç‚¹ã¨ã—ã¦ã¯ `sets.NewString()` ãªã©ã®å‹ã‚’æŒ‡å®šã—ã¦ä½œæˆã™ã‚‹é–¢æ•°ã¯ Deprecated ã«ãªã£ã¦ã„ã‚‹ãŸã‚ã€å‹ã‚’æŒ‡å®šã—ã¦å…¨ã¦ `sets.New()` ã§ä½œæˆã—ã¦ãã ã•ã„ã€‚

```go: deprecated
s := sets.NewString()
```

ã§ã¯ãªã

```go
s := sets.New[string]()
```

ã®ã‚ˆã†ã«ã—ã¦ä½œæˆã—ã¦ãã ã•ã„ã€‚

# KeySet

```go
func KeySet[T comparable, V any](theMap map[T]V) Set[T]
```

å§‹ã‚ã« Set ã¯ map ã§ã‚ã‚‹ã“ã¨ã‚’èª¬æ˜ã—ã¾ã—ãŸã€KeySet ã¯å¼•æ•°ã§æ¸¡ã•ã‚ŒãŸ map ã® key ã§æ–°ãŸãª Set ã‚’ä½œæˆã—ã¾ã™

# Union

```go
func (s1 Set[T]) Union(s2 Set[T]) Set[T]
```

s1 ã¨ s2 ã®å’Œé›†åˆï¼ˆå…¨ã¦ï¼‰ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚

# Difference

```go
func (s1 Set[T]) Difference(s2 Set[T]) Set[T]
```

s1 ã¨ s2 ã®å·®é›†åˆï¼ˆs1 ã ã‘ã«å«ã¾ã‚Œ s2ã€€ã«ã¯å«ã¾ã‚Œãªã„ã‚‚ã®ï¼‰ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚

# Intersection

```go
func (s1 Set[T]) Intersection(s2 Set[T]) Set[T]
```

s1 ã¨ s2 ã®å…±é€šéƒ¨åˆ†(s1 ã«ã‚‚ s2 ã«ã‚‚å«ã¾ã‚Œã‚‹ã‚‚ã®)ã‚’è¿”ã™é–¢æ•°ã§ã™ã€‚

# SymmetricDifference

```go
func (s1 Set[T]) SymmetricDifference(s2 Set[T]) Set[T]
```

## Example


